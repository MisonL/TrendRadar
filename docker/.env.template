# TrendRadar 环境变量模板
# 复制此文件为 .env 并填写具体数值

# ===============================================================
# 1. 基础设置
# ===============================================================

# 时区配置 (影响 Docker 容器系统时间)
TZ=Asia/Shanghai

# 应用时区 (影响程序内部逻辑，通常与 TZ 保持一致)
TIMEZONE=Asia/Shanghai

# 外部访问地址 (例如 http://192.168.1.100:33888)，用于生成图片链接和卡片跳转
WEB_URL=


# ===============================================================
# 2. 核心功能开关
# ===============================================================

# 是否启用爬虫抓取功能 (true/false)
ENABLE_CRAWLER=true

# 是否启用通知推送功能 (true/false)
ENABLE_NOTIFICATION=true


# ===============================================================
# 3. 报告生成配置
# ===============================================================

# 报告模式: daily (当日汇总) | current (当前榜单) | incremental (增量监控)
REPORT_MODE=current

# 显示模式: keyword (按关键词分组) | platform (按平台分组)
DISPLAY_MODE=keyword

# 自定义报告标题 (用于网页标题及各种通知渠道的主题)
REPORT_TITLE=热点资讯追踪

# 每个关键词下最大显示的新闻条数 (0 为不限制)
MAX_NEWS_PER_KEYWORD=0

# 是否优先按配置文件的位置排序 (true) 还是按热点条数排序 (false)
SORT_BY_POSITION_FIRST=false

# 是否反转内容顺序 (false: 统计在前，新增在后; true: 新增在前，统计在后)
REVERSE_CONTENT_ORDER=false


# ===============================================================
# 4. 通知渠道配置
# ===============================================================

# 每次通知推荐的最大新闻数量
MAX_NOTIFY_NEWS=5

# 每个渠道支持的最大多账号数量
MAX_ACCOUNTS_PER_CHANNEL=3

# --- 企业微信 (WeWork) ---
# 机器人 webhook URL，多账号用分号 (;) 分隔
WEWORK_WEBHOOK_URL=
# 消息类型: textcard (卡片，推荐) | markdown (群机器人默认)
WEWORK_MSG_TYPE=textcard

# --- 飞书 (Feishu) ---
# 机器人 webhook URL，多账号用分号 (;) 分隔
FEISHU_WEBHOOK_URL=

# --- 钉钉 (DingTalk) ---
# 机器人 webhook URL，多账号用分号 (;) 分隔
DINGTALK_WEBHOOK_URL=

# --- Telegram ---
# 机器人 Bot Token
TELEGRAM_BOT_TOKEN=
# 会话 Chat ID
TELEGRAM_CHAT_ID=

# --- 邮件通知 (Email) ---
# 发件人邮箱地址
EMAIL_FROM=
# 发件人邮箱密码或授权码
EMAIL_PASSWORD=
# 收件人邮箱，多个用逗号分隔
EMAIL_TO=
# SMTP 服务器地址 (留空则尝试自动识别)
EMAIL_SMTP_SERVER=
# SMTP 端口 (留空则尝试自动识别)
EMAIL_SMTP_PORT=

# --- ntfy ---
# ntfy 服务器地址
NTFY_SERVER_URL=https://ntfy.sh
# 主题名称
NTFY_TOPIC=
# 访问令牌 (可选)
NTFY_TOKEN=

# --- Bark ---
# Bark 推送 URL (格式: https://api.day.app/your_device_key)
BARK_URL=

# --- Slack ---
# Slack Webhook URL
SLACK_WEBHOOK_URL=


# ===============================================================
# 5. 推送窗口控制 (可选，限制特定时间段才推送)
# ===============================================================

# 是否启用推送窗口限制
PUSH_WINDOW_ENABLED=false
# 窗口内是否每天只推送一次 (true/false)
PUSH_WINDOW_ONCE_PER_DAY=true
# 开始时间 (HH:MM)
PUSH_WINDOW_START=09:00
# 结束时间 (HH:MM)
PUSH_WINDOW_END=21:00


# ===============================================================
# 6. 存储配置
# ===============================================================

# 存储后端: auto (自动) | local (本地) | remote (远程 S3)
STORAGE_BACKEND=auto

# 本地数据保留天数 (0 为永久)
LOCAL_RETENTION_DAYS=7

# 是否生成 TXT 格式快照
STORAGE_TXT_ENABLED=false
# 是否生成 HTML 格式报告
STORAGE_HTML_ENABLED=true

# --- 远程存储 (S3 兼容协议，如 Cloudflare R2, MinIO) ---
S3_ENDPOINT_URL=
S3_BUCKET_NAME=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_REGION=
# 远程数据保留天数
REMOTE_RETENTION_DAYS=0

# --- 数据同步 ---
# 启动时是否从远程拉取数据
PULL_ENABLED=false
# 拉取最近 N 天的数据
PULL_DAYS=7


# ===============================================================
# 7. 智能分析 (LLM) - 可选
# ===============================================================

# 是否启用 AI 智能分析
LLM_ENABLED=false
# 提供商: ollama | openai
LLM_PROVIDER=ollama
# API 基础地址
LLM_BASE_URL=http://localhost:11434
# API Key (Ollama 通常留空)
LLM_API_KEY=
# 模型名称
LLM_MODEL=qwen2.5:7b


# ===============================================================
# 8. 网络与代理
# ===============================================================

# 是否在 RSS 抓取时使用代理
RSS_USE_PROXY=false
# RSS 专属代理地址 (例如 http://127.0.0.1:1080)
RSS_PROXY_URL=


# ===============================================================
# 9. Docker 运行模式 (仅限 Docker 部署)
# ===============================================================

# 定时任务表达式 (Cron): 默认每小时执行一次
CRON_SCHEDULE=0 * * * *
# 运行模式: cron (定时器) | once (立即执行一次后退出)
RUN_MODE=cron
# 容器启动后是否立即运行一次
IMMEDIATE_RUN=false

# 是否启用内置 Web 服务器展示 HTML 报告
ENABLE_WEBSERVER=true
# Web 服务器监听端口
WEBSERVER_PORT=33888
